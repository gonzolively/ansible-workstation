---

- name: Install universal base packages
  package:
    name: "{{ item }}"
    state: present
  with_items:
    - "{{ base_packages }}"

- name: Install SNAP packages
  snap: 
    name: "{{ item }}"
  with_items:
    - "{{ snap_packages }}"

- debug:
    msg: "BASE/PACKAGES - has_gui = {{ has_gui }}"

- name: Install graphical packages if GUI exists
  package:
    name: "{{ item }}"
    state: present
  with_items:
    - "{{ graphical_packages }}"
  when: has_gui != ""
